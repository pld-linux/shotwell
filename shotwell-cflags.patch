diff -dur shotwell-0.9.0.orig/plugins/Makefile.plugin.mk shotwell-0.9.0/plugins/Makefile.plugin.mk
--- shotwell-0.9.0.orig/plugins/Makefile.plugin.mk	2011-03-22 21:46:13.000000000 +0100
+++ shotwell-0.9.0/plugins/Makefile.plugin.mk	2011-03-23 10:41:40.000000000 +0100
@@ -32,7 +32,8 @@
 CFILES := $(notdir $(SRC_FILES:.vala=.c))
 OFILES := $(notdir $(SRC_FILES:.vala=.o))
 
-CFLAGS := `pkg-config --print-errors --cflags $(EXT_PKGS)` -O2 -g -pipe -fPIC -nostdlib \
+CFLAGS = -O2 -g
+PLUGIN_CFLAGS := `pkg-config --print-errors --cflags $(EXT_PKGS)` $(CFLAGS) -pipe -fPIC -nostdlib \
 	-export-dynamic
 LDFLAGS := `pkg-config --print-errors --libs $(EXT_PKGS)` $(LDFLAGS)
 DEFINES := -D_VERSION='"$(PLUGINS_VERSION)"' -DGETTEXT_PACKAGE='"shotwell"'
@@ -52,10 +53,10 @@
 	@
 
 $(OFILES): %.o: %.c $(CFILES)
-	$(CC) -c $(CFLAGS) $(DEFINES) -I../.. $(CFILES)
+	$(CC) -c $(PLUGIN_CFLAGS) $(DEFINES) -I../.. $(CFILES)
 
 $(PLUGIN).so: $(OFILES)
-	$(CC) $(CFLAGS) $(LDFLAGS) $(OFILES) -I../.. -shared -o $@
+	$(CC) $(PLUGIN_CFLAGS) $(LDFLAGS) $(OFILES) -I../.. -shared -o $@
 
 .PHONY: cleantemps
 cleantemps:
